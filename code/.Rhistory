summarise(sum(CCP)) %>%
summary
?summarise
?summary
readRDS(paste0(var_save, 'CCPs.rds')) %>%
group_by(choice)
readRDS(paste0(var_save, 'CCPs.rds')) %>%
group_by(choice) %>%
summarise(sum(CCP))
readRDS(paste0(var_save, 'CCPs.rds')) %>%
group_by(choice) %>%
dplyr::summarise(sum(CCP))
source('~/Dropbox/teaching/OPNS523/assignments/OPNS_calc_CCP/solution/code/header.R')
source('~/Dropbox/teaching/OPNS523/assignments/OPNS_calc_CCP/solution/code/header.R')
source('header.R')
sim_values()
calc_CCP()
sim_values()
calc_CCP()
readRDS(paste0(var_save, 'CCPs.rds')) %>%
group_by(choice) %>%
summarise(sum(CCP)) %>%
summary
source('~/Dropbox/teaching/OPNS523/assignments/OPNS_calc_CCP/solution/code/modules/dubugger.R')
test_CCPs()
exp(1000)
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = 1000, min = .5, max = 2)
) %>%
rownames_to_column
num.choices = 10
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = 1000, min = .5, max = 2)
) %>%
rownames_to_column
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = 1000, min = .5, max = 2)
) %>%
rownames_to_column
num.choices = 1000
num.choices = 10
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column
?seq_len
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
by_row(
~rt(n = .$num, df = .$df),
.collate = 'rows'
)
?by_row
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
by_row(
~rt(n = .$num, df = .$df),
.collate = 'rows'
) %>%
select(rowname, .out) %>%
rename(
choice = 'rowname',
choice.specific.value = '.out'
)
readRDS(paste0(var_save, 'CCPs.rds')) ->.
.
group_by(., choice) %>%
summarise(sum.CCP = sum(CCP)) %>%
summary
group_by(., choice) %>%
summarise(sum.CCP = sum(CCP))
group_by(., choice) %>%
summarise(sum.CCP = sum(CCP)) %>%
summary
?replicate
?rpois()
?do
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
)
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
by_row(
~rt(n = .$num, df = .$df),
.collate = 'rows'
)
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
)
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
)
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column
data_frame(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
by_row(
~rt(n = .$num, df = .$df),
.collate = 'rows'
)
source('~/Dropbox/teaching/OPNS523/assignments/OPNS_calc_CCP/solution/code/header.R')
source('~/Dropbox/teaching/OPNS523/assignments/OPNS_calc_CCP/solution/code/header.R')
?rownames_to_column
1000%>%
data_frame(num = 1 + rpois(n = ., lambda = 3)) %>%
mutate(df = runif(n = n(), min = .5, max = 2))
1000%>%
tibble(num = 1 + rpois(n = ., lambda = 3)) %>%
mutate(df = runif(n = n(), min = .5, max = 2))
1000%>%
seq
1000%>%
seq %>%
tibble
num.choices = 1000
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column
rt
rt(n = 4, df = .5)
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>% head
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>% head
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head %>%
mutate(rn = list(seq(num)))
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head %>%
mutate(rn = list(seq(num))) ->y
y$rn
num
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head %>%
mutate(
m = num; rn = list(seq(m))) ->y
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head %>%
mutate(
m = num, rn = list(seq(m))) ->y
y
y$rn
m = num, rn = seq(m)) ->y
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head %>%
mutate(
m = num, rn = seq(m)) ->y
y
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
head->.
expand.grid(
distinct(., num)
summarise(., max(num)) %>%
seq
)
expand.grid(
distinct(., num),
summarise(., max(num)) %>%
seq
)
distinct(., num)
summarise(., max(num))
summarise(., max(num)) %>%
seq
summarise(., max(num)) %>%
seq(1, .)
?seq
summarise(., max(num)) %>%
unlist %>%
seq
expand.grid(
distinct(., num),
summarise(., max(num)) %>%
unlist %>%
seq
)
distinct(., num)
summarise(., max(num)) %>%
unlist %>%
seq
summarise(., max(num)) %>%
unlist %>%
seq %>% class
distinct(., num) %>% class
distinct(., num) %>%
unlist
summarise(., max(num)) %>%
unlist %>%
seq
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>% head
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
plyr::ddply(
'rowname',
~ merge(.,  summarise(., max(num)) %>%
unlist %>%
seq)
)
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
rownames_to_column %>%
plyr::ddply(
'rowname',
~{ merge(.,  summarise(., max(num)) %>%
unlist %>%
seq)}
)
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
)
?transpose
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>% transpose
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>% length
num.choices = 10
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
map_df(~rt(n = .$num, df = .$df))
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
map_df(~{rt(n = .$num, df = .$df)})
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
map(~{rt(n = .$num, df = .$df)})
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
map_i(~{rt(n = .$num, df = .$df)})
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
map(~{
list(
.,
rt(n = .$num, df = .$df)
)
}
)
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose
?map
?imap
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
imap(~{browser()
list(
.,
t = rt(n = .$num, df = .$df)
)
}
)
.y
.x
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
imap(~{
tibble(
trial = .y,
value = rt(n = .x$num, df = .x$df)
)
})
tibble(
num = 1 + rpois(n = num.choices, lambda = 3),
df = runif(n = num.choices, min = .5, max = 2)
) %>%
transpose %>%
imap(~{
tibble(
trial = .y,
value = rt(n = .x$num, df = .x$df)
)
}) %>%
reduce(bind_rows)
10 %>%
rpois(lambda = 3)
10 %>%
rpois(lambda = 3) %>%
tibble(
)
10 %>%
rpois(lambda = 3) %>%
rename(n = .
)
10 %>%
rpois(lambda = 3) %>%
mutate(n = .
)
10 %>% {
tibble(
num = 1 + rpois(n = ., lambda = 3),
df = runif(n = ., min = .5, max = 2)
)
}
rt(n = 2, df = c(1, 10000))
rt(n = 2, df = c(1, 10000))
rt(n = 2, df = c(1, 10000))
rt(n = 2, df = c(1, 10000))
?rt
100%>% {
tibble(
num = 1 + rpois(n = ., lambda = 3),
df = runif(n = ., min = .5, max = 2)
)
} %>%
transpose %>%
imap(~{
tibble(
trial = .y,
choice.specific.value = rt(n = .x$num, df = .x$df)
)
}) %>%
reduce(bind_rows)
100%>% {
tibble(
num = 1 + rpois(n = ., lambda = 3),
df = runif(n = ., min = .5, max = 2)
)
} %>%
transpose %>%
imap(~{
tibble(
trial = .y,
choice.specific.value = rt(n = .x$num, df = .x$df)
)
}) %>%
reduce(bind_rows) %>%
group_by(trial) %>%
mutate(choice = row_number())
100%>% {
tibble(
num = 1 + rpois(n = ., lambda = 3),
df = runif(n = ., min = .5, max = 2)
)
} %>%
transpose %>%
imap(~{
tibble(
trial = .y,
choice.specific.value = rt(n = .x$num, df = .x$df)
)
}) %>%
reduce(bind_rows) %>%
group_by(trial) %>%
mutate(choice = row_number()) %>%
ungroup
source('header.R')
1000 %>%
sim_values
1000 %>%
sim_values ->y
y %>%
group_by(choice) %>%
mutate(
CCP = choice.specific.value - max(choice.specific.value),
CCP = exp(CCP),
CCP = CCP/sum(CCP)
) %>%
ungroup
y %>%
group_by(trial) %>%
mutate(
CCP = choice.specific.value - max(choice.specific.value),
CCP = exp(CCP),
CCP = CCP/sum(CCP)
) %>%
ungroup
y %>%
group_by(trial) %>%
mutate(
CCP = choice.specific.value - max(choice.specific.value),
CCP = exp(CCP),
CCP = CCP/sum(CCP)
) %>%
ungroup ->z
z %>% group_by(trial) %>% summarise(sum(CCP)) %>% summary
y%>%
group_by(trial) %>%
mutate(
CCP = choice.specific.value - max(choice.specific.value),
CCP = exp(CCP),
CCP = CCP/sum(CCP)
) %>%
ungroup
1000 %>%
sim_values %>%
calc_CCP %>%
saveRDS('../../variables/CCP.rds')
source('header.R')
1000 %>%
sim_values %>%
calc_CCP %>%
saveRDS('../../variables/CCP.rds')
1000 %>%
sim_values %>%
calc_CCP %>%
saveRDS('../../../variables/CCP.rds')
1000 %>%
sim_values %>%
calc_CCP %>%
saveRDS('../variables/CCP.rds')
